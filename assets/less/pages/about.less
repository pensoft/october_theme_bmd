// About page tabs and sections
.about-tabs {
    margin-top: 30px;

    .tabs-row{
        display: flex;
        justify-content: center;
    }

    .tabs {
        display: flex;
        gap: 10px;
        flex-wrap: wrap;
    }

    .tab-link {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        padding: 14px 18px;
        border-radius: 60px;
        background: #e3f2f6; 
        color: #2c635b;
        font-family: 'Author', sans-serif;
        font-weight: 500;
        font-size: 16px;
        line-height: 20px;
        letter-spacing: -0.32px;
        text-decoration: none;
        transition: background-color .2s ease, color .2s ease;
        cursor: pointer;

    &.active,
    &:hover {
        background: #20a683;
        color: #ffffff;
        text-decoration: none;
    }
    }
}

// Ensure tab content sections are properly hidden by default
.container-fluid.tab-content {
    display: none !important;
    
    &.active {
        display: block !important;
    }
}

// Additional specificity for tab content sections
section.tab-content {
    display: none !important;
    
    &.active {
        display: block !important;
    }
}

.tab-content {
    display: none;
    padding: 40px 0;

    &.active {
        display: block;
    }

    // Ensure non-active tabs are hidden
    &:not(.active) {
        display: none !important;
    }

    h2 {
        color: @heading-text-color;
        margin: 0 0 20px;
        text-transform: uppercase;
    }

    .lead {
        color: @body-text-color;
    }
}

// What we do â€“ images layout (2 on left, 1 on right centered)
.what-we-do, .why-we-do  {
    .what-we-do-text, .why-we-do-text{
        a{
            color: #737373;
            text-decoration: underline;
            cursor: pointer;
        }
        p {
            padding-right: 80px;
            .breakpoint-large-down({
                padding-right: 0;
            });
        }
    }

    .what-we-do-images {
        display: grid;
        position: relative;
        grid-template-columns: repeat(2, minmax(0, 1fr));
        grid-template-rows: 300px 300px;
        grid-auto-rows: 300px;
        column-gap: 60px;
        row-gap: 20px;
        align-items: center;
        height: 640px; // ensures the right image can center across both rows

        .what-we-do-image-1,
        .what-we-do-image-2,
        .what-we-do-image-3 {
        width: 300px;
        height: 300px;
        border-radius: 50%;
        overflow: hidden;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
        justify-self: start;

        // Entrance animation: initial state
        opacity: 0;
        filter: blur(2px);
        will-change: transform, opacity;
        transition: transform 1.55s cubic-bezier(.2, .6, .2, 1), opacity 1.4s ease, filter 1.4s ease;

        img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }
        }

        // Left column: two stacked images
        .what-we-do-image-1 { grid-column: 1; grid-row: 1; transform: translate3d(-40px, -20px, 0) scale(.98); }
        .what-we-do-image-2 { grid-column: 1; grid-row: 2; transform: translate3d(-40px, 20px, 0) scale(.98); }

        // Right column: single image centered across both rows
        .what-we-do-image-3 {
        // place visually on the right and vertically centered
        position: absolute;
        left: 300px; // push further to the right to increase gap from left images
        top: 50%;
        // initial offset: slide from right while keeping vertical center
        transform: translate(40px, -50%) scale(.98);
        }

        // When each image becomes visible, animate to final position
        .what-we-do-image-1.is-visible,
        .what-we-do-image-2.is-visible {
        opacity: 1;
        filter: none;
        transform: translate3d(0, 0, 0) scale(1);
        }

        // Maintain vertical centering for the third image on reveal
        .what-we-do-image-3.is-visible {
        opacity: 1;
        filter: none;
        transform: translate(0, -50%) scale(1);
        }
        .breakpoint-large-down({
            // Make images visible on small devices, smaller, and slow down animations
            display: grid;
            grid-template-rows: 180px 180px;
            grid-auto-rows: 180px;
            height: 370px;
            column-gap: 20px;
            row-gap: 16px;
            .what-we-do-image-1,
            .what-we-do-image-2,
            .what-we-do-image-3 {
                width: 180px;
                height: 180px;
                transition: transform 2.2s cubic-bezier(.2, .6, .2, 1), opacity 2s ease, filter 2s ease;
            }
            .what-we-do-image-3 {
                left: 180px;
            }
        });
  }
}

// Place the images column on the right side on desktop layouts
@media (min-width: 992px) {
  .what-we-do {
    .what-we-do-images {
      order: 2;
    }
  }
}


.what-we-do{
    .objective-item {
        border: 1px solid rgba(0, 0, 0, 0.08);
        border-radius: 10px;
        background: #F0F2F3;
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.04);
        margin-bottom: 16px;

        .objective-head {
            position: relative;
            padding: 16px 26px;
            font-family: 'Author', sans-serif;
            font-weight: 400;
            font-size: 18px;
            color: #000000;
            cursor: pointer;
            outline: none;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 14px;

            .objective-text {
                padding-left: 0;
                flex: 1;
            }

            .objective-arrow {
                display: flex;
                align-items: center;
                justify-content: end;
                .chevron-icon { 
                    transition: transform .2s ease;
                    width: 18px;
                    height: 8px;
                }
            }

            // Focus-visible outline for accessibility
            &:focus-visible {
              box-shadow: 0 0 0 2px rgba(32, 166, 131, 0.3);
              border-radius: 12px;
            }
        }

        // Rotate chevron when expanded
        &.expanded {
            .objective-head .objective-arrow .chevron-icon {
                transform: rotate(180deg);
            }
        }

        .objective-content {
            padding: 0 26px 16px 26px;
            color: @body-text-color;
        }
    }    
}

.why-we-do{
    .about-why-we-do{
        .container{
            padding-top: 38px;
            padding-bottom: 38px;
        }
    }

    .target-requirement {
        border-radius: 10px;
        background: #F0F2F3;
        padding: 20px;
        min-height: 240px;
        h3, p{
            color: #737373;
            font-family: Author;
        }
        img {
            width: 45.803px;
            height: 46px;
            margin-bottom: 27px;
            object-fit: contain;
        }
        h3{
            font-size: 24px;
            margin-bottom: 0;
        }
        p{
            font-size: 18px;
        }
        .breakpoint-large-down({
            margin-bottom: 40px;
        });
    }    
}


.how-we-do{
    .about-how-we-do-intro{
        .container{
            padding-top: 38px !important;
            padding-bottom: 38px !important;
        }
    }
    .how-we-do-intro{
        display: flex;
        text-align: center;
        color: #737373;
        font-size: 18px;
        font-weight: 375;
        margin-bottom: 0;
    }


}

// Work packages accordion styles
.work-packages {
    
    .work-package {
        margin-bottom: 16px;
        border-bottom: 1px solid #DCDCDC;
        &.expanded {
            .work-package-arrow .chevron-icon { transform: rotate(180deg); }
        }

        .work-package-header {
            cursor: pointer;
            padding: 16px 0px;
            display: flex;
            align-items: center;

        }
        .prefix{
            flex-basis: 5.66666666%;
            max-width: 5.66666666%;
            .breakpoint-large-down({
                flex-basis: unset;
                max-width: unset;
            });
        }
        .wp-arrow{
            flex-basis: 9.33333333%;
            max-width: 9.33333333%;
            .breakpoint-large-down({
                flex-basis: unset;
                max-width: unset;
            });
        }
        .prefix .prefix-number {
            width: 64px;
            height: 64px;
            border-radius: 7px;
            background: url('../../assets/images/wp-cover.png') center/cover;
            color: #fff;
            display: flex;
            align-items: center;
            justify-content: center;
            font-family: 'Arial';
            font-weight: 400;
        }
        
        .title{
            margin-bottom: 0 !important;
        }

        .title h3 {
            margin: 0;
            color: #0F2F2A;
            font-family: Author;
            font-size: 18px;
            font-style: normal;
            font-weight: 494;
        }

        .work-package-arrow {
            display: flex;
            align-items: center;
            justify-content: end;
            .chevron-icon { 
                transition: transform .2s ease;
                width: 18px;
                height: 8px;
            }
        }

        .work-package-content {
            padding: 0 20px 18px 10px;
            color: #737373;
            p, h3{
                color: #737373;
            }
        }
    }
}


// External Expert Advisory Board styles
.who-we-are {
    .text-center{
        display: flex;
        justify-content: center;
        text-align: center;
        .section-header{
            // width: 30%;
            line-height: 1.4;
            .breakpoint-large-down({
                width: 100%;
            });
        }
    }

    .eab-profiles {
        margin-top: 10px;
    }

    .eab-profile {
        margin-bottom: 24px;
    }

    .eab-card {
        position: relative;
        background: transparent;
        border-radius: 10px;
        overflow: hidden;
        box-shadow: none;
        padding-bottom: 12px;
    }

    .eab-partner-logo {
        position: absolute;
        top: 10px;
        left: 10px;
        z-index: 2;
        background: #ffffff;
        border-radius: 6px;
        padding: 6px 8px;
        box-shadow: 0 6px 16px rgba(0,0,0,0.08);
        img { 
            object-fit: contain; 
            display: block; 
            max-width: 72px; 
            height: 40px; 
        }
    }

    .eab-image {
        background: #e6e6e6;
        display: block;
        margin-bottom: 10px;
        border-radius: 10px;
        width: 100%;
        aspect-ratio: 228.243 / 188.591;
        overflow: hidden;

        img { 
            width: 100%; 
            height: 100%; 
            object-fit: cover; 
            display: block; 
            border-radius: 10px;
        }
    }

    .eab-image-placeholder {
        width: 100%; 
        height: 100%; 
        background: #d9d9d9;
    }

    .eab-card-footer {
        padding: 0;
        .eab-name { 
            color: #0F2F2A; 
            font-family: Author; 
            padding: 0;
            font-weight: 500; 
        }
        .col-xs-5 {
            padding: 0;
        }
        a.eab-biography-toggle {
            color: #20a683;
            text-decoration: none;
            font-family: Author;
            font-weight: 500;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            .chevron {
                transition: transform .2s ease;
            }
            &[aria-expanded='true'] .chevron { transform: rotate(180deg); }
        }
    }

    .eab-position {
        color: #737373;
        font-size: 14px;
        padding: 0;
        margin-top: 2px;
    }

    .eab-bio {
        padding: 10px 0;
        color: #737373;
        font-size: 14px;
    }
}
